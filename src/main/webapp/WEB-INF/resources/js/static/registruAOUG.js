var registruTable;var addInregistrareForm = $('#modal-addRegistru-form');var addTipContinutForm = $('#modal-addTipContinut-form');$(document).ready(function () {    $('#registru-aoug').addClass('active');    try {        registruTable = $('#registru-table').DataTable({            "ajax": {                "url": '/app/secure/registru/get-aoug',                "dataSrc": ""            },            "columns": [                {                    "data": "nrRegistru",                    "className": 'text-bold'                },                {                    "data": "data",                    "className": 'text-bold'                },                {"data": "nrSiDataDocumentului"},                {"data": "deLa"},                {"data": "tipContinut"},                {"data": "continut"},                {"data": "dataExpediere"},                {"data": "catre"},                {"data": "semnat"},                {"data": "formatFizic"}            ],            "columnDefs": [                {                    "targets": [1,6],                    "bUseRendered": true,                    "visible": true,                    "fnCreatedCell": function (nTd, sData, oData, i) {                        if (sData != null) {                            $(nTd).html(generateFormatedDate(new Date(sData)));                        }                    }                },                {                    "targets": [8,9],                    "bUseRendered": true,                    "visible": true,                    "fnCreatedCell": function (nTd, sData, oData, i) {                        $(nTd).html('<div class="checkbox"><label><input type="checkbox" ' + (sData == 0 ? '' : ' checked="" ') + '></label></div>');                    }                }            ],            dom:'T<"clear"><"H"lfr>t<"F"ip>',            tableTools: {                "sSwfPath": "/swf/copy_csv_xls_pdf.swf",                "aButtons": [                    {                        "sExtends": "csv",                        "sButtonClass": "btn btn-default",                        "sButtonText": '<span class="fa fa-file-o">&nbsp;&nbsp;</span><span>CSV</span>',                        "mColumns": [0, 1, 2, 3, 4, 5, 6],                        "oSelectorOpts": {                            page: 'current'                        }                    },                    {                        "sExtends": "xls",                        "sButtonClass": "btn btn-default",                        "sCharSet": "utf16le",                        "sButtonText": '<span class="fa fa-file-excel-o">&nbsp;&nbsp;</span><span>XLS</span>',                        "mColumns": [0, 1, 2, 3, 4, 5, 6],                        "oSelectorOpts": {                            page: 'current'                        }                    },                    {                        "sExtends": "pdf",                        "sButtonClass": "btn btn-default",                        "sButtonText": '<span class="fa fa-file-pdf-o">&nbsp;&nbsp;</span><span>PDF</span>',                        "mColumns": [0, 1, 2, 3, 4, 5, 6],                        "oSelectorOpts": {                            page: 'current'                        }                    }                ]            }        });    } catch (err) {        console.log(err);    }    $("#registru-search").on('keyup', function () {        registruTable.search(this.value).draw();    });    $('#addRegistru-form-idTipContinut').on('change', function () {        $('#addRegistru-form-continut').val(($('#addRegistru-form-idTipContinut option:selected').text()) + ': ' + $('#addRegistru-form-continut').val())    });    $('#addRegistru-form-data').val(generateFormatedDate(new Date()));    addInregistrareForm.validate({        rules: {            required: true        },        messages: {            nrRegistru: {required: "Acest c&#226;mp este obligatoriu"},            data: {required: "Acest c&#226;mp este obligatoriu"},            idTipContinut: {required: "Acest c&#226;mp este obligatoriu"},            deLa: {required: "Acest c&#226;mp este obligatoriu"},            catre: {required: "Acest c&#226;mp este obligatoriu"},            continut: {required: "Acest c&#226;mp este obligatoriu"}        }    });    addInregistrareForm.on('submit', function (e) {        e.preventDefault();        if (!$(this).valid()) {            return;        }        var token = $("meta[name='_csrf']").attr("content");        var header = $("meta[name='_csrf_header']").attr("content");        var nrRegistru = $('#addRegistru-form-nrRegistru').val();        var data = $('#addRegistru-form-data').val();        var idTipContinut = $('#addRegistru-form-idTipContinut').val();        var idGrupStoc = $('#addStoc-form-idGrupStoc').val();        var deLa = $('#addRegistru-form-deLa').val();        var catre = $('#addRegistru-form-catre').val();        var continut = $('#addRegistru-form-continut').val();        var dataToSend = {            "nrRegistru": nrRegistru, "data": data, "deLa": deLa,            "idGrupStoc": idGrupStoc, "idTipContinut": idTipContinut,            "catre": catre, "continut": continut        };        $.ajax({            type: 'post',            url: $(this).attr('action'),            beforeSend: function (xhr) {                xhr.setRequestHeader(header, token);            },            async: false,            dataType: 'json',            contentType: 'application/json',            mimeType: 'application/json',            data: JSON.stringify(dataToSend),            success: function (response) {                $('#modal-addRegistru').modal('hide');                addInregistrareForm.trigger('reset');                $('.chosen-select').trigger(chosenUpdated);                showNotification(response.message, 'Success', SUCCESS);                registruTable.ajax.reload(null, false);            },            error: function () {                showNotification("Error. Mai &#238;ncerca&#539;i o dat&#259;.", "Error", ERROR);            }        });    });    addTipContinutForm.validate({        rules: {            required: true        },        messages: {            text: {required: "Acest c&#226;mp este obligatoriu"}        }    });    addTipContinutForm.on('submit', function (e) {        e.preventDefault();        if (!$(this).valid()) {            return;        }        var token = $("meta[name='_csrf']").attr("content");        var header = $("meta[name='_csrf_header']").attr("content");        var text = $('#addTipContinut-form-text').val();        var dataToSend = {            "text": text        };        $.ajax({            type: 'post',            url: $(this).attr('action'),            beforeSend: function (xhr) {                xhr.setRequestHeader(header, token);            },            async: false,            dataType: 'json',            contentType: 'application/json',            mimeType: 'application/json',            data: JSON.stringify(dataToSend),            success: function (response) {                $('#modal-addTipContinut').modal('hide');                addTipContinutForm.trigger('reset');                showNotification(response.message, 'Success', SUCCESS);                getAllTipContinut();            },            error: function () {                showNotification("Error. Mai &#238;ncerca&#539;i o dat&#259;.", "Eroare", ERROR);            }        });    });});